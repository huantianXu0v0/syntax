import{r as e,E as a,H as s,a as l,b as n,w as t,f as i,h as o,R as r,j as u,F as c,l as d,m as f,z as m,v as _,t as p,T as v,U as g,s as k,p as h,i as b,Q as y}from"./index-DwZjcXUC.js";import{s as I,m as L}from"./store.DEtVyp6z.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=x({__name:"PcNavbar",emits:["openAuth"],setup(x,{emit:C}){const U=e(""),w=a((()=>!(!I.hasLogin||!I.userInfo.role)&&I.userInfo.role.includes("admin"))),A=a((()=>{if(!I.hasLogin)return"?";const e=I.userInfo,a=e.nickname||e.username||e.mobile||"U";return String(a).charAt(0).toUpperCase()})),F=()=>m({url:"/pages/index/index"}),S=()=>{_({url:"/pages/feedback/index"})},j=()=>{_({url:"/pages/profile/index"})},P=()=>{_({url:"/pages/feedback/admin"})},N=e=>{_({url:"login"===e?"/pages/login/login":"/pages/register/register"})},T=()=>{v({title:"Log out",content:"Are you sure?",success:async e=>{if(e.confirm){try{const e=p.importObject("uni-id-co",{customUI:!0});await e.logout()}catch(a){}L.setUserInfo({},{cover:!0}),g("uni_id_token"),g("uni_id_token_expired"),k({title:"Logged out",icon:"none"}),m({url:"/pages/index/index"})}}})},R=()=>{_({url:"/pages/record/history",animationType:"fade-in"})};return s((()=>I.userInfo),(e=>{const a=null==e?void 0:e.avatar_file,s=(null==a?void 0:a.url)||(null==e?void 0:e.avatar);s?(async e=>{if(e)if(e.startsWith("http")||e.startsWith("blob"))U.value=e;else try{const a=await p.getTempFileURL({fileList:[e]});a.fileList&&a.fileList.length>0&&(U.value=a.fileList[0].tempFileURL)}catch(a){console.error("Navbarå¤´åƒè½¬æ¢å¤±è´¥",a)}else U.value=""})(s):U.value=""}),{immediate:!0,deep:!0}),(e,a)=>{const s=h,m=b,_=y;return l(),n(m,{class:"navbar-wrapper"},{default:t((()=>[i(m,{class:"container-xl navbar-inner"},{default:t((()=>[i(s,{class:"logo",onClick:F},{default:t((()=>[o("SYNTAX")])),_:1}),i(m,{class:"nav-menu"},{default:t((()=>[i(s,{class:"nav-item"},{default:t((()=>[o("Products-xu")])),_:1}),i(s,{class:"nav-item"},{default:t((()=>[o("Solutions-huan")])),_:1}),i(s,{class:"nav-item"},{default:t((()=>[o("Pricing-tian")])),_:1}),i(s,{class:"nav-item"},{default:t((()=>[o("Docs-King")])),_:1})])),_:1}),i(m,{class:"nav-actions"},{default:t((()=>[r(I).hasLogin?(l(),n(m,{key:1,class:"user-profile-area"},{default:t((()=>[i(m,{class:"avatar-wrapper"},{default:t((()=>{var e,a;return[(null==(a=null==(e=r(I).userInfo)?void 0:e.avatar_file)?void 0:a.url)?(l(),n(_,{key:0,src:U.value,class:"avatar-img",mode:"aspectFill"},null,8,["src"])):(l(),n(m,{key:1,class:"avatar-placeholder"},{default:t((()=>[o(d(A.value),1)])),_:1}))]})),_:1}),i(m,{class:"dropdown-menu"},{default:t((()=>[i(m,{class:"menu-header"},{default:t((()=>[i(s,{class:"u-name"},{default:t((()=>[o(d(r(I).userInfo.nickname||r(I).userInfo.username||"User"),1)])),_:1}),i(s,{class:"u-sub"},{default:t((()=>[o(d(r(I).userInfo.email||r(I).userInfo.mobile||"No contact info"),1)])),_:1})])),_:1}),i(m,{class:"menu-divider"}),i(m,{class:"menu-item",onClick:j},{default:t((()=>[i(s,{class:"icon"},{default:t((()=>[o("ðŸ‘¤")])),_:1}),o(" Profile Settings ")])),_:1}),i(m,{class:"menu-item",onClick:R},{default:t((()=>[i(s,{class:"icon"},{default:t((()=>[o("ðŸ•’")])),_:1}),o(" Learning Activity ")])),_:1}),i(m,{class:"menu-item",onClick:S},{default:t((()=>[i(s,{class:"icon"},{default:t((()=>[o("ðŸ’¬")])),_:1}),o(" Help & Feedback ")])),_:1}),i(m,{class:"menu-divider"}),w.value?(l(),n(m,{key:0,class:"menu-item admin-item",onClick:P},{default:t((()=>[i(s,{class:"icon"},{default:t((()=>[o("ðŸ› ï¸")])),_:1}),o(" Admin Console ")])),_:1})):f("",!0),i(m,{class:"menu-item logout",onClick:T},{default:t((()=>[i(s,{class:"icon"},{default:t((()=>[o("ðŸšª")])),_:1}),o(" Log Out ")])),_:1})])),_:1})])),_:1})):(l(),u(c,{key:0},[i(s,{class:"login-link",onClick:a[0]||(a[0]=e=>N("login"))},{default:t((()=>[o("Sign In")])),_:1}),i(m,{class:"nav-btn",onClick:a[1]||(a[1]=e=>N("register"))},{default:t((()=>[o("Start Free")])),_:1})],64))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-1dc62388"]]);export{C as P};
