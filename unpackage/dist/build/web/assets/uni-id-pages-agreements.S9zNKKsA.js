import{v as e,y as s,a as t,b as a,w as n,j as r,F as i,f as l,h as o,k as p,l as u,m,D as c,p as g,af as d,ag as f,i as h}from"./index-DwZjcXUC.js";import{_}from"./uni-popup-dialog.CtIVFozA.js";import{r as A}from"./uni-app.es.CIFaVD21.js";import{_ as k}from"./uni-popup.DsGFa7FD.js";import{c as x}from"./store.DEtVyp6z.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";let y=()=>console.log("为定义");const C=v({name:"uni-agreements",computed:{agreements(){if(!x.agreements)return[];let{serviceUrl:e,privacyUrl:s}=x.agreements;return[{url:e,title:"用户服务协议"},{url:s,title:"隐私政策条款"}]}},props:{scope:{type:String,default:()=>"register"}},methods:{popupConfirm(){this.isAgree=!0,y()},popup(e){this.needPopupAgreements=!0,this.$nextTick((()=>{e&&(y=e),this.$refs.popupAgreement.open()}))},navigateTo({url:s,title:t}){e({url:"/uni_modules/uni-id-pages/pages/common/webview/webview?url="+s+"&title="+t,success:e=>{},fail:()=>{},complete:()=>{}})},hasAnd:(e,s)=>e.length-1>s,setAgree(e){this.isAgree=!this.isAgree,this.$emit("setAgree",this.isAgree)}},created(){var e,s;this.needAgreements=((null==(s=null==(e=x)?void 0:e.agreements)?void 0:s.scope)||[]).includes(this.scope)},data:()=>({isAgree:!1,needAgreements:!0,needPopupAgreements:!1})},[["render",function(e,x,v,y,C,b){const j=c,w=g,T=d,P=f,$=h,U=A(s("uni-popup-dialog"),_),D=A(s("uni-popup"),k);return b.agreements.length?(t(),a($,{key:0,class:"root"},{default:n((()=>[C.needAgreements?(t(),r(i,{key:0},[l(P,{onChange:b.setAgree},{default:n((()=>[l(T,{class:"checkbox-box"},{default:n((()=>[l(j,{checked:C.isAgree,style:{transform:"scale(0.5)","margin-right":"-6px"}},null,8,["checked"]),l(w,{class:"text"},{default:n((()=>[o("同意")])),_:1})])),_:1})])),_:1},8,["onChange"]),l($,{class:"content"},{default:n((()=>[(t(!0),r(i,null,p(b.agreements,((e,s)=>(t(),a($,{class:"item",key:s},{default:n((()=>[l(w,{class:"agreement text",onClick:s=>b.navigateTo(e)},{default:n((()=>[o(u(e.title),1)])),_:2},1032,["onClick"]),b.hasAnd(b.agreements,s)?(t(),a(w,{key:0,class:"text and",space:"nbsp"},{default:n((()=>[o(" 和 ")])),_:1})):m("",!0)])),_:2},1024)))),128))])),_:1})],64)):m("",!0),C.needAgreements||C.needPopupAgreements?(t(),a(D,{key:1,ref:"popupAgreement",type:"center"},{default:n((()=>[l(U,{confirmText:"同意",onConfirm:b.popupConfirm},{default:n((()=>[l($,{class:"content"},{default:n((()=>[l(w,{class:"text"},{default:n((()=>[o("请先阅读并同意")])),_:1}),(t(!0),r(i,null,p(b.agreements,((e,s)=>(t(),a($,{class:"item",key:s},{default:n((()=>[l(w,{class:"agreement text",onClick:s=>b.navigateTo(e)},{default:n((()=>[o(u(e.title),1)])),_:2},1032,["onClick"]),b.hasAnd(b.agreements,s)?(t(),a(w,{key:0,class:"text and",space:"nbsp"},{default:n((()=>[o(" 和 ")])),_:1})):m("",!0)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onConfirm"])])),_:1},512)):m("",!0)])),_:1})):m("",!0)}],["__scopeId","data-v-4773cb79"]]);export{C as _};
